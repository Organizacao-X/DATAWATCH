<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/areaBoasVindas.css">
    <title>DATAWATCH - Bem vindo! </title>
</head>

<body onload="exibirBoasVindas()">
    <!-- NAVBAR -->
    <header>
        <nav class="nav-bar">
            <div class="hamburger-menu">
                <input id="menu__toggle" type="checkbox" />
                <label class="menu__btn" for="menu__toggle">
                    <span></span>
                </label>



                <ul class="menu__box">
                    <div class="image">
                        <img src="./assets/imgs/imagem-do-usuario-com-fundo-preto.png" alt=""
                            style="height: 200px; width: 200px; border-radius: 50%; ">
                    </div>
                    <div class="nomeUser">
                        <span id="nome_usuario_menu"></span>
                    </div>
                    <li><a class="menu__item" href="../public/areaFuncionário.html">Home</a></li>
                    <li id="lateral_menu_cad_download"><a class="menu__item" href="./JAR/DATAWATCH-sistema.zip"
                        download="app_DataWatch">Baixar aplicativo</a></li>
                    <li><a class="menu__item" onclick="limparSessao()">Logout</a></li>
                </ul>
            </div>



            <div class="logo">
                <a href="./areaFuncionário.html">
                    <img src="assets/imgs/LOGOcomTextoV2.png" alt="" width="150px">
                </a>
            </div>
        </nav>

    </header>

    <section>
        <div class="usuario">
            <span id="span_usuario"></span>
        </div>
    </section>
    <div>
        <h1>shhh, segredo!</h1>
        <span id="nome_usuario"></span>
    </div>
</body>

</html>
<script>
    function exibirBoasVindas(idUsuario) {
        var idUsuario = sessionStorage.ID_USUARIO;
        fetch(`/datawatch/exibirBoasVindas/${idUsuario}`, {
            cache: 'no-store'
        }).then(function (resposta) {
            if (resposta.ok) {
                resposta.json().then(dadosUsuario => {
                    console.log(dadosUsuario[0].nomeUsuario)

                    nome_usuario.innerHTML = `${dadosUsuario[0].uuid}`;
                })
            }
            else {
                throw (JSON.stringify(resposta))
            }
        }).catch(function (resposta) {
            console.log(`ERRO: ${resposta}`);
        })
        return false

    }
</script>